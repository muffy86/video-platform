#!/bin/bash\n\n# 🔑 API Keys Configuration Script for AI Remodeling Assistant\n# This script helps you configure API keys for enhanced features\n\necho \"🏠 AI Remodeling Assistant - API Configuration\"\necho \"==============================================\"\necho \"\"\n\n# Check if .env file exists\nif [ ! -f \".env\" ]; then\n    echo \"❌ .env file not found. Creating from template...\"\n    cp .env.example .env\nfi\n\necho \"📋 Current API Key Status:\"\necho \"\"\n\n# Function to check if API key is configured\ncheck_api_key() {\n    local key_name=$1\n    local key_value=$(grep \"^$key_name=\" .env 2>/dev/null | cut -d'=' -f2)\n    \n    if [ -z \"$key_value\" ] || [[ $key_value == *\"your_\"* ]] || [[ $key_value == *\"demo\"* ]]; then\n        echo \"⚠️  $key_name: Not configured\"\n        return 1\n    else\n        echo \"✅ $key_name: Configured\"\n        return 0\n    fi\n}\n\n# Check all API keys\ncheck_api_key \"REACT_APP_OPENROUTER_API_KEY\"\ncheck_api_key \"REACT_APP_OPENAI_API_KEY\" \ncheck_api_key \"REACT_APP_REMOVE_BG_API_KEY\"\ncheck_api_key \"REACT_APP_DEEPGRAM_API_KEY\"\ncheck_api_key \"REACT_APP_PERPLEXITY_API_KEY\"\n\necho \"\"\necho \"🚀 Setup Instructions:\"\necho \"\"\n\necho \"1. 🤖 OpenRouter (Highest Priority)\"\necho \"   • Visit: https://openrouter.ai\"\necho \"   • Sign up for free account\"\necho \"   • Go to 'Keys' section\"\necho \"   • Create new API key\"\necho \"   • Benefits: Better AI models, higher limits\"\necho \"   • Cost: Free tier + $5 credit\"\necho \"\"\n\necho \"2. 🎤 OpenAI (High Priority)\" \necho \"   • Visit: https://platform.openai.com\"\necho \"   • Create account and verify phone\"\necho \"   • Go to API Keys section\"\necho \"   • Create new secret key\"\necho \"   • Benefits: GPT-4 Vision, Realtime API\"\necho \"   • Cost: $5 free credit for new accounts\"\necho \"\"\n\necho \"3. 🖼️ Remove.bg (Medium Priority)\"\necho \"   • Visit: https://www.remove.bg/api\"\necho \"   • Sign up for free account\"\necho \"   • Get API key from dashboard\"\necho \"   • Benefits: Professional background removal\"\necho \"   • Cost: 50 images/month free\"\necho \"\"\n\necho \"4. 🎙️ Deepgram (Medium Priority)\"\necho \"   • Visit: https://deepgram.com\"\necho \"   • Sign up for free account\"\necho \"   • Create project and get API key\"\necho \"   • Benefits: Enhanced speech recognition\"\necho \"   • Cost: $200 free credit + 45,000 minutes\"\necho \"\"\n\necho \"5. 📚 Perplexity (Optional)\"\necho \"   • Visit: https://www.perplexity.ai/settings/api\"\necho \"   • Sign up and request API access\"\necho \"   • Benefits: Real-time research, building codes\"\necho \"   • Cost: Limited free tier\"\necho \"\"\n\necho \"📝 To configure an API key:\"\necho \"   1. Get your API key from the service\"\necho \"   2. Edit the .env file in your project root\"\necho \"   3. Replace 'your_keyname_here' with your actual key\"\necho \"   4. Restart your development server\"\necho \"\"\n\necho \"💡 Example .env configuration:\"\necho \"   REACT_APP_OPENROUTER_API_KEY=sk-or-v1-abc123...\"\necho \"   REACT_APP_OPENAI_API_KEY=sk-def456...\"\necho \"   REACT_APP_REMOVE_BG_API_KEY=ghi789...\"\necho \"\"\n\n# Interactive configuration\nread -p \"Would you like to configure API keys now? (y/N): \" -n 1 -r\necho \"\"\nif [[ $REPLY =~ ^[Yy]$ ]]; then\n    echo \"🔧 Interactive API Key Configuration\"\n    echo \"\"\n    \n    # OpenRouter configuration\n    if ! check_api_key \"REACT_APP_OPENROUTER_API_KEY\" > /dev/null; then\n        echo \"🤖 OpenRouter API Key Configuration\"\n        echo \"Please get your key from: https://openrouter.ai\"\n        read -p \"Enter your OpenRouter API key (or press Enter to skip): \" openrouter_key\n        if [ ! -z \"$openrouter_key\" ]; then\n            # Update .env file\n            if grep -q \"REACT_APP_OPENROUTER_API_KEY=\" .env; then\n                sed -i \"s/REACT_APP_OPENROUTER_API_KEY=.*/REACT_APP_OPENROUTER_API_KEY=$openrouter_key/\" .env\n            else\n                echo \"REACT_APP_OPENROUTER_API_KEY=$openrouter_key\" >> .env\n            fi\n            echo \"✅ OpenRouter API key configured\"\n        fi\n        echo \"\"\n    fi\n    \n    # OpenAI configuration\n    if ! check_api_key \"REACT_APP_OPENAI_API_KEY\" > /dev/null; then\n        echo \"🎤 OpenAI API Key Configuration\"\n        echo \"Please get your key from: https://platform.openai.com\"\n        read -p \"Enter your OpenAI API key (or press Enter to skip): \" openai_key\n        if [ ! -z \"$openai_key\" ]; then\n            if grep -q \"REACT_APP_OPENAI_API_KEY=\" .env; then\n                sed -i \"s/REACT_APP_OPENAI_API_KEY=.*/REACT_APP_OPENAI_API_KEY=$openai_key/\" .env\n            else\n                echo \"REACT_APP_OPENAI_API_KEY=$openai_key\" >> .env\n            fi\n            echo \"✅ OpenAI API key configured\"\n        fi\n        echo \"\"\n    fi\n    \n    # Remove.bg configuration\n    if ! check_api_key \"REACT_APP_REMOVE_BG_API_KEY\" > /dev/null; then\n        echo \"🖼️ Remove.bg API Key Configuration\"\n        echo \"Please get your key from: https://www.remove.bg/api\"\n        read -p \"Enter your Remove.bg API key (or press Enter to skip): \" removebg_key\n        if [ ! -z \"$removebg_key\" ]; then\n            if grep -q \"REACT_APP_REMOVE_BG_API_KEY=\" .env; then\n                sed -i \"s/REACT_APP_REMOVE_BG_API_KEY=.*/REACT_APP_REMOVE_BG_API_KEY=$removebg_key/\" .env\n            else\n                echo \"REACT_APP_REMOVE_BG_API_KEY=$removebg_key\" >> .env\n            fi\n            echo \"✅ Remove.bg API key configured\"\n        fi\n        echo \"\"\n    fi\n    \n    echo \"🎉 Configuration complete!\"\n    echo \"📱 Please restart your development server to apply changes:\"\n    echo \"   bun dev\"\nfi\n\necho \"\"\necho \"📖 For detailed setup instructions, see: API_SETUP_GUIDE.md\"\necho \"🌐 Test your configuration at: https://ai-remodeling-assistant-e87e2294.scout.site\"\necho \"\"